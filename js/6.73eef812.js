(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"184b":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("ded3"),s=a.n(n),o=a("2f62");const i={method:{getGeoLoc(){var e=function(e){return e};function t(e){alert("code: "+e.code+"\nmessage: "+e.message+"\n")}this.$q.cordova?cordova.plugins.locationAccuracy.canRequest((function(a){a&&cordova.plugins.locationAccuracy.request((function(a){alert("Successfully requested accuracy: "+a.message),navigator.geolocation.watchPosition(e,t,{timeout:5e3})}),(function(e){alert("Accuracy request failed: error code="+e.code+" error message="+e.message),e.code!==cordova.plugins.locationAccuracy.ERROR_USER_DISAGREED&&window.confirm("Failed to automatically set Location Mode to High Accuracy. Would you like to switch to the Location Settings page and do this manually?")&&cordova.plugins.diagnostic.switchToLocationSettings()}),cordova.plugins.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY)})):"geolocation"in navigator&&"watchPosition"in navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,{timeout:5e3}):alert("Geolocation is not supported.")}},computed:s()(s()({},Object(o["c"])("appState",["appState"])),{},{custBreakWidth(){return this.$q.screen.width<=this.appState.breakpoint}})}},5493:function(e,t,a){},"6efd":function(e,t,a){"use strict";a("5493")},7464:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",staticClass:"font-nunito"},[a("div",{staticClass:"column no-wrap",class:e.$q.dark.isActive?"bg-grey-10":"bg-grey-2",staticStyle:{width:"100%"}},[a("q-card-section",{staticClass:"row"},[a("div",{staticClass:"text-h6 text-capitalize"},[e._v(e._s(e.$t("general.search")))]),a("q-space"),a("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.onCancelClick}})],1),a("q-card-section",{staticClass:"column q-gutter-y-sm no-wrap q-py-none",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{staticClass:"row",staticStyle:{height:"30px"}},[a("q-scroll-area",{staticClass:"column no-wrap flex-center",staticStyle:{flex:"1"},attrs:{"bar-style":{background:"transparent"},"thumb-style":{background:"transparent"},horizontal:""}},[a("div",{staticClass:"row no-wrap q-gutter-x-sm"},e._l(e.searchByOpt,(function(t,n){return a("q-btn",{key:t+n,staticClass:"text-bold",attrs:{size:"sm",padding:"6px 10px",unelevated:t===e.searchBy,outline:t!=e.searchBy,color:t===e.searchBy?"secondary":"grey",label:t},on:{click:function(a){e.searchBy=t}}})})),1)])],1),a("q-select",{attrs:{"use-input":"","hide-selected":"","fill-input":"",standout:"bg-secondary text-white",behavior:"menu","input-debounce":"0",label:e.$t("phmgtSell.drugName"),options:e.options},on:{filter:e.filterFn,"filter-abort":e.abortFilterFn,input:function(t){e.selectInputEmit(),e.clearDosage(),e.autoComplete(e.dosageOpt)}},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[e._v("\n              No results\n            ")])],1)]},proxy:!0},e.models.name?{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(t){return t.stopPropagation(),e.clearName()}}})]},proxy:!0}:null],null,!0),model:{value:e.models.name,callback:function(t){e.$set(e.models,"name",t)},expression:"models.name"}}),a("q-select",{attrs:{standout:"bg-secondary text-white",behavior:"menu",disable:!e.models.name,options:e.dosageOpt,label:e.$t("phmgtSell.dosage")},on:{input:function(t){e.tempObj.dosage=e.filterBySearch(e.models.dosage,e.tempObj.name,"dosage"),e.clearDose()}},scopedSlots:e._u([e.models.dosage?{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(t){return t.stopPropagation(),e.clearDosage()}}})]},proxy:!0}:null],null,!0),model:{value:e.models.dosage,callback:function(t){e.$set(e.models,"dosage",t)},expression:"models.dosage"}}),a("q-select",{attrs:{standout:"bg-secondary text-white",behavior:"menu",disable:!e.models.dosage,options:e.doseOpt,label:e.$t("phmgtSell.dose")},on:{input:function(t){e.tempObj.dose=e.filterBySearch(e.models.dose,e.tempObj.dosage,"dose"),e.clearManuf()}},scopedSlots:e._u([e.models.dose?{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(t){return t.stopPropagation(),e.clearDose()}}})]},proxy:!0}:null],null,!0),model:{value:e.models.dose,callback:function(t){e.$set(e.models,"dose",t)},expression:"models.dose"}}),a("q-select",{attrs:{standout:"bg-secondary text-white",behavior:"menu",disable:!e.models.dose,options:e.manufOpt,label:e.$t("general.company")},on:{input:function(t){e.tempObj.manuf=e.filterBySearch(e.models.manuf,e.tempObj.dose,"company"),e.models.amount=null}},scopedSlots:e._u([e.models.manuf?{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(t){return t.stopPropagation(),e.clearManuf()}}})]},proxy:!0}:null],null,!0),model:{value:e.models.manuf,callback:function(t){e.$set(e.models,"manuf",t)},expression:"models.manuf"}}),a("q-input",{staticStyle:{flex:"1"},attrs:{standout:"bg-secondary text-white",disable:!e.models.manuf,type:"tel",placeholder:e.$t("general.amount"),rules:[function(t){return t<=e.outOfStock||"OUT OF STOCK"}]},model:{value:e.models.amount,callback:function(t){e.$set(e.models,"amount",t)},expression:"models.amount"}})],1),a("q-card-section",{staticClass:"row"},[a("q-btn",{staticStyle:{flex:"1"},attrs:{outline:e.addBtnState.state,disable:e.addBtnState.state,color:e.addBtnState.color,label:e.addBtnState.label},on:{click:function(t){e.submitItem(),e.onCancelClick()}}})],1)],1)])},s=[],o=(a("c975"),a("ddb0"),a("ded3")),i=a.n(o),r=a("2f62"),l={data(){return{models:{name:null,dosage:null,dose:null,manuf:null,amount:null},searchDrugName:"",searchBy:"Generic",searchByOpt:["Generic","Brand","Harasi","Aria","IRC"],options:"",searchKey:"generic",tempObj:{name:[],dosage:[],dose:[],manuf:[{}]}}},created(){this.options=this.stringOptions},methods:i()(i()({show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onOKClick(){this.$emit("ok"),this.hide()},onCancelClick(){this.hide()}},Object(r["b"])("drugOrder",["addDrugItem"])),{},{filterFn(e,t,a){var n;this.searchDrugName=e,"b-"===e.substring(0,2)?(n=e.substring(2),this.searchKey="brand"):(n=e,this.searchKey="generic"),setTimeout((()=>{t((()=>{if(""===n)this.options=this.stringOptions;else{const e=n.toLowerCase();this.options=this.stringOptions.filter((t=>t.toLowerCase().indexOf(e)>-1))}}),(e=>{""!==n&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))}),300)},abortFilterFn(){},filterBySearch(e,t,a){const n=e.toLowerCase();return t.filter((e=>e[a].toLowerCase().indexOf(n)>-1))},arrKeyVals(e,t){return e.map((e=>e[t]))},uniq(e){return Array.from(new Set(e))},submitItem(){this.addDrugItem({medId:this.tempObj.manuf[0].medId,amount:parseInt(this.models.amount)})},selectInputEmit(e){""===e?console.log(typeof e):this.tempObj.name=this.filterBySearch(this.models.name,this.medicineList,this.searchKey)},clearName(){this.models.name=null,this.models.dosage=null,this.models.dose=null,this.models.manuf=null,this.models.amount=null,this.tempObj.name=[],this.tempObj.dosage=[],this.tempObj.dose=[],this.tempObj.manuf=[{}]},clearDosage(){this.models.dosage=null,this.models.dose=null,this.models.manuf=null,this.models.amount=null,this.tempObj.dosage=[],this.tempObj.dose=[],this.tempObj.manuf=[{}]},clearDose(){this.models.dose=null,this.models.manuf=null,this.models.amount=null,this.tempObj.dose=[],this.tempObj.manuf=[{}]},clearManuf(){this.models.manuf=null,this.models.amount=null,this.tempObj.manuf=[{}]},autoComplete(e,t){1===e.length&&(this.models.dosage=this.tempObj.name[0].dosage,this.models.dose=this.tempObj.name[0].dose,this.models.manuf=this.tempObj.name[0].company,this.tempObj.dosage=this.tempObj.name,this.tempObj.dose=this.tempObj.name,this.tempObj.manuf=this.tempObj.name)}}),computed:i()(i()(i()(i()({},Object(r["c"])("inventory",["inventory"])),Object(r["c"])("medList",["medicineList"])),Object(r["c"])("drugOrder",["drugOrder"])),{},{dosageOpt(){return this.uniq(this.arrKeyVals(this.tempObj.name,"dosage"))},doseOpt(){return this.uniq(this.arrKeyVals(this.tempObj.dosage,"dose"))},manufOpt(){return this.uniq(this.arrKeyVals(this.tempObj.dose,"company"))},outOfStock(){const e=this.inventory[this.tempObj.manuf[0].medId];return void 0!==e&&e.inventory},addBtnState(){var e=this.drugOrder.med.map((e=>e.medId));return this.models.name&&this.models.dosage&&this.models.dose&&this.models.manuf?e.indexOf(this.tempObj.manuf[0].medId)>-1?{state:!0,color:"warning",label:this.$t("phmgtSell.itemAlreadyExist")}:this.models.amount&&"0"!==this.models.amount?{state:!1,color:"secondary",label:this.$t("general.add")}:{state:!0,color:"grey",label:this.$t("general.add")}:{state:!0,color:"grey",label:this.$t("general.add")}},stringOptions(){return"b-"===this.searchDrugName.substring(0,2)?Array.from(new Set(this.medicineList.map((e=>e.brand)))):Array.from(new Set(this.medicineList.map((e=>e.generic))))}})},c=l,d=(a("c54a"),a("2877")),u=a("24e8"),m=a("a370"),p=a("2c91"),h=a("9c40"),g=a("4983"),b=a("ddd8"),f=a("66e5"),y=a("4074"),O=a("0016"),S=a("27f9"),v=a("8572"),k=a("eebe"),C=a.n(k),w=Object(d["a"])(c,n,s,!1,null,null,null),j=w.exports;C()(w,"components",{QDialog:u["a"],QCardSection:m["a"],QSpace:p["a"],QBtn:h["a"],QScrollArea:g["a"],QSelect:b["a"],QItem:f["a"],QItemSection:y["a"],QIcon:O["a"],QInput:S["a"],QField:v["a"]});const x={data(){return{qrScanOption:{preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"Place a barcode inside the scan area",resultDisplayDuration:500,orientation:'landscape"',disableAnimations:!0,disableSuccessBeep:!0}}},methods:{addDrug(){this.$q.dialog({component:j,parent:this,persistent:!0}).onOk((()=>{console.log("OK")})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))}}}},b3e7:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"row no-wrap"},[e.custBreakWidth&&1!==e.appState.step?e._e():a("div",{staticClass:"column q-ma-md",staticStyle:{"min-width":"300px"},attrs:{id:"patientInformation"}},[a("div",{staticClass:"column",staticStyle:{flex:"1"}},[a("q-scroll-area",{staticClass:"column",staticStyle:{flex:"1"},attrs:{"bar-style":{background:"transparent"},"thumb-style":{background:"transparent"}}},[a("presc-info",{attrs:{drugOrderTemp:e.drugOrder}})],1)],1),e.custBreakWidth?a("q-btn",{attrs:{unelevated:"",color:"secondary",label:"save"},on:{click:function(t){return e.setStep({step:e.appState.step+1})}}}):e._e()],1),e.custBreakWidth?e._e():a("q-separator",{attrs:{vertical:"",inset:""}}),e.custBreakWidth&&2!==e.appState.step?e._e():a("div",{staticClass:"column q-ma-md",staticStyle:{flex:"1"},attrs:{id:"durgList"}},[e.custBreakWidth?e._e():a("span",{staticClass:"text-uppercase text-caption text-bold"},[e._v("\n      "+e._s(e.$t("phmgtSell.patientInfo")))]),e.custBreakWidth?e._e():a("add-drug"),e.custBreakWidth?e._e():a("list-header",{attrs:{headers:e.headerName}}),a("q-scroll-area",{staticClass:"column",staticStyle:{flex:"1"},attrs:{"bar-style":{background:"transparent"},"thumb-style":{background:"transparent"}}},e._l(e.drugOrder.med,(function(t,n){return a("div",{key:t+n},[e.custBreakWidth&&2!==e.appState.step?e._e():a("a-item",{attrs:{item:t,indicator:t.amount<e.inventory[t.medId].inventory?"green":"warning",title:e.medicineList.filter((function(e){return e.medId===t.medId}))[0].generic+" "+e.medicineList.filter((function(e){return e.medId===t.medId}))[0].dose,caption:e.medicineList.filter((function(e){return e.medId===t.medId}))[0].company,sideCaptionTop:t.amount+" "+e.medicineList.filter((function(e){return e.medId===t.medId}))[0].dosage,headers:e.headerName,list:e.medicineList.filter((function(e){return e.medId===t.medId}))[0]}})],1)})),0),a("price-view",{attrs:{drugOrder:e.drugOrder,medList:e.medicineList}})],1),!e.custBreakWidth&&e.moreInfo?a("q-separator",{attrs:{vertical:"",inset:""}}):e._e(),e.custBreakWidth&&3!==e.appState.step||!e.moreInfo?e._e():a("div",{staticStyle:{"min-width":"300px"},attrs:{id:"moreInformation"}})],1)},s=[],o=(a("c975"),a("e6cf"),a("ded3")),i=a.n(o),r=a("2f62"),l=a("7464"),c=a("184b"),d={data(){return{page:this.custBreakWidth,moreInfo:0,printOrSend:"print",price:null,tempDrugList:[],headerName:[{label:"drug name",name:"generic"},{label:"dose",name:"dose"},{label:"dosage",name:"dosage"},{label:"company",name:"company"},{label:"amount",name:"amount"},{label:"direction",name:"direction"},{label:"barcode",name:"barcode"}]}},mixins:[l["a"],c["a"]],components:{prescInfo:()=>Promise.all([a.e(0),a.e(24)]).then(a.bind(null,"bcb4")),priceView:()=>a.e(4).then(a.bind(null,"862c")),listHeader:()=>a.e(22).then(a.bind(null,"1943")),aItem:()=>Promise.all([a.e(0),a.e(20)]).then(a.bind(null,"1f96")),addDrug:()=>a.e(13).then(a.bind(null,"61eb"))},computed:i()(i()(i()(i()(i()({},Object(r["c"])("drugOrder",["drugOrder","status","serverMsg"])),Object(r["c"])("appState",["appState"])),Object(r["c"])("medList",["medicineList"])),Object(r["c"])("inventory",["inventory"])),{},{totalPrice(){return this.price>0?" - "+this.price.toLocaleString()+" riyal":""},medListItem(e){return this.medicineList.filter((t=>t.medId===e))}}),methods:i()(i()(i()(i()({},Object(r["b"])("drugOrder",["getOrder","resetState"])),Object(r["b"])("appState",["setStep"])),Object(r["b"])("pharmRecord",["addSellRecord"])),{},{unavailItem(e){e.indexOf(!1)>-1?this.printOrSend="send":this.printOrSend="print"},saveSellRecord(){this.addSellRecord({medEcode:this.medEcode,pharm_id:1,issued_by:2,medList:this.tempDrugList,amountPayable:this.price,pack_by:null,pack_duration:null}),this.medEcode=null,this.resetState(),this.toFirstStep()}}),watch:{medEcode:{handler:function(){this.getDrugOrder()}}}},u=d,m=(a("6efd"),a("2877")),p=a("9989"),h=a("4983"),g=a("9c40"),b=a("eb85"),f=a("8572"),y=a("eebe"),O=a.n(y),S=Object(m["a"])(u,n,s,!1,null,null,null);t["default"]=S.exports;O()(S,"components",{QPage:p["a"],QScrollArea:h["a"],QBtn:g["a"],QSeparator:b["a"],QField:f["a"]})},c54a:function(e,t,a){"use strict";a("d4ee")},d4ee:function(e,t,a){}}]);