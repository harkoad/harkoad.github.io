"use strict";(self["webpackChunkariamin"]=self["webpackChunkariamin"]||[]).push([[134],{5134:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ge});var r=a(3673),s=a(2323),i=a(8880);const o={key:0,class:"column",style:{flex:"1"}},n={class:"column"},l={class:"row"},c={class:"ellipsis"},d={class:"column"},p=(0,r.Uk)("Filters"),m={class:"row"},u={class:"ellipsis"};function g(e,t,a,g,h,y){const S=(0,r.up)("q-item-label"),I=(0,r.up)("q-item-section"),v=(0,r.up)("q-item"),f=(0,r.up)("q-list"),k=(0,r.up)("q-input"),w=(0,r.up)("q-btn"),b=(0,r.up)("q-chip"),P=(0,r.up)("q-dialog"),C=(0,r.up)("q-page"),E=(0,r.Q2)("ripple");return(0,r.wg)(),(0,r.j4)(C,{class:"column"},{default:(0,r.w5)((()=>[0===g.store.state.app.page.step?((0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(f,{separator:""},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.appointments,((e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.j4)(v,{clickable:"",key:t},{default:(0,r.w5)((()=>[(0,r.Wm)(I,null,{default:(0,r.w5)((()=>[(0,r.Wm)(S,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.name+" -  "+e.age),1)])),_:2},1024),(0,r.Wm)(S,{caption:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.time+" - "+e.reason),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[E]]))),128))])),_:1}),(0,r.Wm)(k,{modelValue:g.ssn,"onUpdate:modelValue":t[0]||(t[0]=e=>g.ssn=e),label:"ssn"},null,8,["modelValue"]),(0,r.Wm)(k,{modelValue:g.code,"onUpdate:modelValue":t[1]||(t[1]=e=>g.code=e),label:"code"},null,8,["modelValue"]),(0,r.Wm)(w,{label:"getOrder",onClick:g.getEOrder},null,8,["onClick"])])):(0,r.kq)("",!0),e.$q.screen.lt.sm&&a.mainLoaded?((0,r.wg)(),(0,r.j4)(r.lR,{key:1,to:"#toolbarOpt"},[(0,r.Wm)(w,{flat:"",dense:"","no-caps":"",label:"Diagnosis",color:"primary",onClick:t[2]||(t[2]=e=>g.dialog=!0)})])):(0,r.kq)("",!0),(0,r.Wm)(P,{persistent:"",modelValue:g.dialog,"onUpdate:modelValue":t[4]||(t[4]=e=>g.dialog=e),class:"full-height",maximized:e.$q.screen.lt.sm,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(g.dynoComponent.comp),(0,r.dG)(g.dynoComponent.props,{onOnClose:t[3]||(t[3]=e=>g.filters={})}),{easy:(0,r.w5)((()=>[(0,r.wy)((0,r._)("div",n,[(0,r._)("div",l,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.filters,((e,t,a)=>((0,r.wg)(),(0,r.j4)(b,{clickable:"",removable:"",outline:"",color:"primary",key:a,style:{"max-width":"300px"},onRemove:e=>{delete g.filters[t],g.createMedEasyOptSeq(g.searchMedList)}},{default:(0,r.w5)((()=>[(0,r._)("div",c,(0,s.zw)(e),1)])),_:2},1032,["onRemove"])))),128))])],512),[[i.F8,Object.keys(g.filters).length]]),(0,r.wy)((0,r._)("div",d,[g.searchMedList.length?((0,r.wg)(),(0,r.j4)(S,{key:0,header:""},{default:(0,r.w5)((()=>[p])),_:1})):(0,r.kq)("",!0),(0,r._)("div",m,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.easyOpts.list,((e,t)=>((0,r.wg)(),(0,r.j4)(b,{clickable:"",outline:"",color:"grey-7",key:t,style:{"max-width":"300px"},onClick:t=>{g.filters[g.easyOpts.key]=e,g.createMedEasyOptSeq(g.searchMedList)}},{default:(0,r.w5)((()=>[(0,r._)("div",u,(0,s.zw)(e),1)])),_:2},1032,["onClick"])))),128))])],512),[[i.F8,g.easyOpts.list]])])),list:(0,r.w5)((()=>[g.searchMedList.length?((0,r.wg)(),(0,r.j4)(S,{key:0,header:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(`${g.searchMedList.length} medicine${g.searchMedList.length>1?"s":""}`),1)])),_:1})):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.searchMedList,((e,t)=>((0,r.wg)(),(0,r.j4)(v,{clickable:"",key:t},{default:(0,r.w5)((()=>[(0,r.Wm)(I,null,{default:(0,r.w5)((()=>[(0,r.Wm)(S,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(`${e.brand} ${e.dose} (${e.brand_owner})`),1)])),_:2},1024),(0,r.Wm)(S,{caption:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(`${e.generic}`),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},16))])),_:1},8,["modelValue","maximized"])])),_:1})}a(71);var h=a(1959),y=a(3617),S=a(9582);const I=(e,t)=>{const a=(0,r.FN)().proxy;return(0,h.Fl)({get(){return e[t]},set(e){a.$emit(`update:${t}`,e)}})},v=()=>{0!==store.state.app.page.slide&&0!==store.state.app.page.step?store.commit("app/update",[{item:"page.step",val:store.state.app.page.step-1},{item:"page.slide",val:store.state.app.page.slide-1}]):store.state.app.app||router.go(-1)},f=(e,t="",a,r)=>t&&t.length>=r&&0!==e.length?e.filter((e=>a.some((a=>e[a].toString().toLowerCase().includes(t.toString().toLowerCase()))))):[],k=(e,t)=>Object.keys(t)&&0!==e.length?e.filter((e=>Object.keys(t).every((a=>e[a].toString().toLowerCase().includes(t[a].toString().toLowerCase()))))):e,w=(e,t=null)=>[...new Set(e.map((e=>t?e[t]:e)))],b=e=>e.filter((e=>!["undefined",void 0,"null",null,""].some((t=>e===t)))),P={useVModel:I,goBack:v,searchInlist:f,filterList:k,uniqArray:w,cleanArray:b};a(2100);var C=a(52),E=a.n(C);const O={ver:3,mainRoute:"test",protocol:"http",baseUrl(){return`${this.protocol}://${this.mainRoute}.ihio.gov.ir/erx-core/v${this.ver}/service/`},token:"auth/token/fetch",cpartySess:"auth/session/cparty/open",otp:"auth/session/cparty/otp/check",citizenSess:"auth/session/citizen/open",getPartner:"partner/search",getPartnerByPrintCode:"partner/fetch",getGenCodeByIRC:"product/fetch",getIRCByGenCode:"product/search/irc/generic",searchByClauseIRC:"product/search/quick/irc",searchByClauseGenCode:"product/search/quick/generic",searchCofamily:"product/irc/cofamily/fetch/generic",searchCofamilyServices:"service/cofamily/fetch/servicenn",searchCombination:"product/search/quick/combination",searchService:"service/search/quick",setPOrder:"prescription/paper/order",setEOrder:"prescription/save",updateEOrder:"prescription/update",deliverPOrder:"prescription/paper/order",deliverEOrder:"prescription/deliver",confirmPOrder:"prescription/paper/deliver/confirm",confirmEOrder:"prescription/deliver/confirm",getEPrescByPrint:"prescription/fetch/printcode",getRefPrescByPrint:"prescription/fetch/reference/printcode",fetchDelivered:"prescription/delivered/fetch",deleteDelivered:"prescription/delivered/delete",checkOSubOrder:"subscription/check/order",checkESubOrder:"subscription/check/deliver",checkPSubOrder:"subscription/check/paper",checkESubOrderPrice:"subscription/check/deliver/price",checkPSubOrderPrice:"subscription/check/paper/price",checkUID:"subscription/inquery/uid",reactiveUID:"subscription/reactive/uid",genPaperSamad:"samad/paper/generate",genESamad:"samad/electronic/generate",genERefSamad:"samad/electronic/generate/reference",listSamad:"samad/ordered/search",listSamadDeliver:"samad/delivered/search",getBill:"bill/check/send",listBill:"bill/info/fetch",printBill:"print/bill",printOrder:"print/order",printDeliver:"print/deliver"},z={tokUser:"ERX_ariaman_test",tokPass:"9120942282",terminalId:200164,cpartyUser:"drug",cpartyPass:"987654"},q={samadStatus:{R:"record",O:"order",D:"deliver"},typeId:{1:["دارو","drug"],2:["آزمایش","test"],3:["تصویر برداری","imaging"],4:["فیزیوتراپی","physiotherapy"],5:["خدمات پزشکان","doctor"],6:["خدمات ارجاع","reference"],7:["خدمات دندانپزشکی","dentist"],8:["تجهیزات","equipment"]},dosage:{A:"ampule",I:"insulin",T:"tablet",C:"capsule",R:"spray",Z:"gel",G:"drop",D:"powder",S:"syrup",O:"Misc"},consumption:[["225750008","","Every two hours"],["225753005","","Every three hours"],["225756002","","Every four hours"],["307468000","","Every six hours"],["307469008","","Every eight hours"],["307470009","","Every twelve hours"],["396126224","","Every thirty six hours"],["229727004","","Once a day"],["225760004","","Every other day"],["225760004","","Every other night"],["229799001","","Twice a day"],["229798009","","Three times a day"],["307439001","","Four times a day"],["307452006","","Every ten days"],["1511000175108","","Every twenty eight days"],["225768006","","Every hour"],["14497002","","Every week"],["89185003","","Every month"],["307455008","","Every year"],["307472001","","Every morning"],["307473006","","Every night"],["20050000","","Every other week"],["51199007","","Every three weeks"],["229800002","","Twice a week"],["3015006","","Every three months"],["307456009","","Every six months"],["307446005","","Five days a week"],["422135004","","As directed"],["420449005","","As Needed"]],consumptionInstruction:[["0.5 ml",""],["1 ml",""],["1.5 ml",""],["2 ml",""],["25 ml",""],["3 ml",""],["3.5 ml",""],["4 ml",""],["5 ml",""],["7.5 ml",""],["10 ml",""],["15 ml",""],["30 ml",""]],expertiseGrad:[["midwife",""],["doctor",""],["expert",""],["specialty",""],["expert fellowship",""],["subspecialty fellowship",""]]},D=()=>new Promise(((e,t)=>{E()({url:`${O.baseUrl()}${O.token}`,method:"POST",data:JSON.stringify({terminalId:z.terminalId,username:z.tokUser,password:z.tokPass})}).then((e=>e.data)).then((t=>{console.log(t),localStorage.setItem("salamat-token",t.info.token),e(t)})).catch((e=>t(e)))})),L=(e,t)=>{localStorage.getItem("salamat-token");return new Promise((async(a,r)=>{await E()({baseURL:O.baseUrl(),url:O.cpartySess,method:"post",headers:{token:"d448f575db31a44e57f103787b94dd66a8efd3360237ce3999da72010a406a6b55f0ad69fa40304e26fbf4c348b6e2e1b19bc356093fcd7583a86e5ef1ce1b5136f486f78ef9b8ee98563d0b41f49ea5",terminalId:200164,clientIPAddress:"198.50.24.172",clientAgentInfo:"30.25.24.172"},data:JSON.stringify({cpartyUsername:e,cpartyPassword:t})}).catch((e=>r(e)))}))},_=(e,t,a)=>{V(O.citizenSess,{cpartySessionId:null,nationalNumber:a},e,t).then((e=>{console.log(e),localStorage.setItem("salamat-citizen",e.info)}))},B=(e,t,a,r,s)=>V(O.getPartner,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,citizenSessionId:localStorage.getItem("salamat-citizen").citizenSessionId,nomedicalSystem:a,visitDate:r,expertiseGrade:s},e,t),M=(e,t,a)=>V(O.opt,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,opt:a},e,t),U=(e,t,a)=>V(O.genESamad,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,opt:a},e,t),R=(e,t,a)=>V(O.getPartner,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,citizenSessionId:localStorage.getItem("salamat-citizen").citizenSessionId,paperInfoWrapper:a},e,t),x=(e,t,a)=>{const r=V(O.getEPrescByPrint,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,citizenSessionId:localStorage.getItem("salamat-citizen").citizenSessionId,printCode:a},e,t);if(r)return localStorage.setItem("salamat-presc",r.info),r},A=(e,t,a)=>V(O.getRefPrescByPrint,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,citizenSessionId:localStorage.getItem("salamat-citizen").citizenSessionId,printCode:a},e,t),$=(e,t)=>{},j=(e,t,a,r,s="E")=>{let i="E"===s?i.checkESubOrder:i.checkPSubOrder,o={cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,citizenSessionId:localStorage.getItem("salamat-citizen").citizenSessionId,checkCode:a,basePrice};return"E"===s?o.trackingCode=r:o.samadCode=r,V(i,o,e,t)},H=()=>{},W=(e,t,a,r,s)=>{let i="E"===a?i.deliver:i.checkPSubOrder,o={cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,citizenSessionId:localStorage.getItem("salamat-citizen").citizenSessionId,Subscriptions:s};return"E"===a?o.trackingCode=r:o.samadCode=r,V(i,o,e,t)},N=(e,t,a,r="get")=>{let s="get"===r?s.fetchDelivered:s.deleteDelivered;return V(s,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,checkCode:a},e,t)};function Q(e,t,a,r,s,i="valid"){let o="valid"===i?o.checkUID:o.reactiveUID;return V(o,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,citizenSessionId:localStorage.getItem("salamat-citizen").citizenSessionId,checkCode:a,count:r,uId:s},e,t)}const Z=(e,t,a,r)=>V(O.printOrder,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,citizenSessionId:localStorage.getItem("salamat-citizen").citizenSessionId,samadCode:a,type:r},e,t),F=(e,t,a)=>V(O.printDeliver,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,checkCode:a},e,t),T=(e,t,a)=>V(O.printBill,{cpartySessionId:localStorage.getItem("salamat-cparty").sessionId,billId:a},e,t),V=(e,t,a,r)=>{let s=null,i=null;return new Promise(((o,n)=>{L(a,r).then((a=>{E()({url:`${O.baseUrl()}${e}`,method:"POST",data:JSON.stringify(t),header:{terminalId:z.terminalId.toString(),token:localStorage.getItem("salamat-token"),clientIPAddress:"198.50.24.172",clientAgentInfo:"30.25.24.172"}}).then((e=>e.data)).then((e=>{s&&e.newToken,i&&e.newCparySess,o(e)}))})).catch((e=>{console.log(e),n(e)}))}))},G={namespaced:!0,url:O,val:z,table:q,getToken:D,getAgent:L,getCiti:_,getPartner:B,getAgentOTP:M,genESamad:U,genPSamad:R,getEPrescByPrint:x,getRefPrescByPrint:A,checkSubOrder:$,checkSubOrderPrice:j,validatePrescSubOrder:H,deliverPresc:W,deliverdPresc:N,esalat:Q,printOrder:Z,printDelivered:F,printBill:T,sReq:V},K=[{name:"armin pourmohammad",age:"27",reason:"checkup",time:"13:10"},{name:"sepideh kohestani",age:"24",reason:"severe headache",time:"13:15"}],J=[{name:"Infectious and Parasitic",code:"A00-B99"},{name:"Neoplasms",code:"C00-D49"},{name:"blood",code:"D50-D89"},{name:"Endocrine and Nutritional",code:"E00-E89"},{name:"Mental, Behavioral",code:"F01-F99"},{name:"Nervous",code:"G00-G99"},{name:"Eye and Adnexa",code:"H00-H59"},{name:"Ear and Mastoid",code:"H60-H95"},{name:"Circulatory",code:"I00-I99"},{name:"Respiratory",code:"J00-J99"},{name:"Digestive",code:"K00-K95"},{name:"Skin",code:"L00-L99"},{name:"Musculoskeletal",code:"M00-M99"},{name:"Genitourinary",code:"N00-N99"},{name:"Pregnancy, Childbirth",code:"O00-O9A"},{name:"Perinatal",code:"P00-P96"},{name:"Congenital malformations",code:"Q00-Q99"},{name:"Injury and poisoning",code:"S00-T88"},{name:"Morbidity",code:"V00-Y99"}],Y=(0,r.RC)((()=>Promise.all([a.e(736),a.e(199)]).then(a.bind(a,7199)))),X={components:{Search:Y},props:["mainLoaded"],setup(){const e=(0,y.oR)(),t=(0,S.tv)(),a=(0,h.iH)(!1),s=(0,h.iH)({}),i=(0,h.iH)({}),o=(0,h.iH)("0860976432"),n=(0,h.iH)("63837");(0,r.bv)((()=>{e.dispatch("hCare/getAriaminMainMedList")}));const l=(0,h.Fl)((()=>({comp:"Search",props:{placeholder:"Medicine Name"}}))),c=(0,h.Fl)((()=>{let t=e.state.app.app.searchTerm,a=[...e.state.hCare.masterList],r=P.searchInlist(a,t,e.state.hCare.searchBased,3);return d(r),Object.keys(s.value)?P.filterList(r,s.value):r})),d=t=>{let a=Object.keys(s.value),r=[...e.state.hCare.filterBased];if(r=r.slice(a.length),r.length){for(let e of r)0!==e&&delete s.value[e];return i.value={key:r[0],list:P.uniqArray(t,r[0])}}i.value={}},p=()=>{try{G.getAgent("drug","987654")}catch(e){console.log(e)}};return{store:e,router:t,dialog:a,filters:s,easyOpts:i,appointments:K,diagnosis:J,dynoComponent:l,searchMedList:c,createMedEasyOptSeq:d,ssn:o,code:n,getEOrder:p}}};var ee=a(4260),te=a(4379),ae=a(7011),re=a(3414),se=a(2035),ie=a(2350),oe=a(4689),ne=a(8240),le=a(6778),ce=a(7030),de=a(6489),pe=a(7518),me=a.n(pe);const ue=(0,ee.Z)(X,[["render",g]]),ge=ue;me()(X,"components",{QPage:te.Z,QList:ae.Z,QItem:re.Z,QItemSection:se.Z,QItemLabel:ie.Z,QInput:oe.Z,QBtn:ne.Z,QDialog:le.Z,QChip:ce.Z}),me()(X,"directives",{Ripple:de.Z})}}]);